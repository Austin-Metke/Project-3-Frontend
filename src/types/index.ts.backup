// Shared application types used across the frontend

// Generic API wrapper used by some backend responses
export interface ApiResponse<T = any> {
  data: T
  message?: string
  success?: boolean
}

// User and Authentication Types
export interface User {
  id: string
  name: string
  email: string
  totalPoints?: number
  createdAt?: string
}

export interface ApiError {
  message: string
  statusCode?: number
  errors?: Record<string, string[]>
}

// Activity category union
export type ActivityCategory = 
  | 'Transportation'
  | 'Recycling'
  | 'Energy'
  | 'Water'
  | 'Food'
  | 'Other'

export interface LoginCredentials {
  email: string
  password: string
}

export interface SignUpData {
  name: string
  email: string
  password: string
}

export interface UpdateUserData {
  name?: string
  email?: string
  password?: string
}

// Dashboard Stats Types
export interface UserStats {
  totalPoints: number
  currentStreak: number
  weeklyPoints: number
  monthlyPoints: number
  rank: number
  recentActivities: Activity[]
  weeklyProgress: WeeklyProgress[]
}

export interface WeeklyProgress {
  day: string
  points: number
}

// Activity Types
export interface Activity {
  id: string
  userId: string
  activityType: ActivityType
  points: number
  category: ActivityCategory
  createdAt: string
  description?: string
}

export interface ActivityType {
  id: string
  name: string
  description: string
  points: number
  category: ActivityCategory
  icon?: string
}

export interface ActivityLog {
  id: string
  userId: string
  activityTypeId: string
  activityType?: ActivityType
  points?: number
  createdAt: string
  description?: string
}

export interface CreateActivityLogData {
  userId: string
  activityTypeId: string
  description?: string
}

export interface CreateActivityTypeData {
  name: string
  description: string
  points: number
  category: ActivityCategory
  icon?: string
}

export interface UpdateActivityTypeData {
  name?: string
  description?: string
  points?: number
  category?: ActivityCategory
  icon?: string
}

export type ActivityCategory = 
  | 'Transportation'
  | 'Recycling'
  | 'Energy'
  | 'Water'
  | 'Food'
  | 'Other'

// Leaderboard Types
export interface LeaderboardEntry {
  userId: string
  userName: string
  totalPoints: number
  rank: number
  avatar?: string
}

// Challenge Types
export interface Challenge {
  challengeId: number
  name: string
  description: string
  points: number
  isCompleted: boolean
  userId: number
}

// API Response wrapper
export interface ApiResponse<T> {
  success: boolean
  data: T
  message?: string
}

export interface Activity {
  id?: number | string
  userId?: number | string
  activityType?: ActivityType
  activityTypeId?: number
  points?: number
  category?: ActivityCategory | string
  createdAt?: string
  description?: string
}

export interface WeeklyProgressPoint {
  day: string
  points: number
}

// Basic user shape
export interface User {
  id: number
  name?: string
  email?: string
  username?: string
  googleID?: string | null
  createdAt?: string
  updatedAt?: string
  totalPoints?: number
}

// Authentication response normalized for the frontend
export interface AuthResponse {
  user?: User
  token?: string
}

// Credentials / signup shapes (loose to tolerate backend differences)
export interface LoginCredentials {
  // backend in this project expects { name, passwordHash }
  name?: string
  email?: string
  password?: string
  passwordHash?: string
}

export interface SignUpData {
  name?: string
  email?: string
  password?: string
  passwordHash?: string
}

// Dashboard / stats
export interface UserStats {
  totalPoints: number
  currentStreak: number
  weeklyPoints: number
  monthlyPoints: number
  rank: number
  recentActivities: Activity[]
  weeklyProgress: WeeklyProgressPoint[]
}

// Leaderboard entry returned by backend or synthesized by frontend
export interface LeaderboardEntry {
  userId: number | string
  name?: string
  totalPoints: number
  totalCo2gSaved?: number | string
}

// Challenge shape (kept permissive to tolerate backend shapes)
export interface Challenge {
  id?: number | string
  name?: string
  description?: string
  points?: number
  isCompleted?: boolean
  userId?: number | string
}

